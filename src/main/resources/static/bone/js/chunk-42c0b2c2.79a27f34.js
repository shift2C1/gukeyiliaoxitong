(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42c0b2c2"],{"0ccb":function(e,t,l){var r=l("50c4"),a=l("1148"),o=l("1d80"),n=Math.ceil,i=function(e){return function(t,l,i){var c,s,d=String(o(t)),u=d.length,p=void 0===i?" ":String(i),f=r(l);return f<=u||""==p?d:(c=f-u,s=a.call(p,n(c/p.length)),s.length>c&&(s=s.slice(0,c)),e?d+s:s+d)}};e.exports={start:i(!1),end:i(!0)}},1148:function(e,t,l){"use strict";var r=l("a691"),a=l("1d80");e.exports="".repeat||function(e){var t=String(a(this)),l="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(l+=t);return l}},"1c66":function(e,t,l){"use strict";l.r(t);var r=function(){var e=this,t=this,l=t.$createElement,r=t._self._c||l;return r("div",{staticClass:"medical-record-container shadow"},[r("el-descriptions",{staticStyle:{width:"1000px","margin-left":"23px","margin-bottom":"12px"},attrs:{title:"病例信息",column:"2",border:""}},[r("el-descriptions-item",{attrs:{label:"患者姓名","label-style":"width:125px"}},[t._v(t._s(t.caseInfo.patient))]),r("el-descriptions-item",{attrs:{label:"病例号","label-style":"width:125px"}},[t._v(t._s(t.formatParam(t.caseInfo.hospitalCaseId)))]),r("el-descriptions-item",{attrs:{label:"出生年月日","label-style":"width:125px"}},[t._v(t._s(t.caseInfo.birthday.split(" ")[0])+" ")]),r("el-descriptions-item",{attrs:{label:"患者年龄","label-style":"width:125px"}},[t._v(t._s(t.caseInfo.patientAge)+" 岁")]),r("el-descriptions-item",{attrs:{label:"患者性别","label-style":"width:125px"}},[t._v(t._s(t.caseInfo.gender))]),r("el-descriptions-item",{attrs:{label:"身份证号","label-style":"width:125px"}},[t._v(t._s(t.formatParam(t.caseInfo.idCard)))]),r("el-descriptions-item",{attrs:{label:"手机号","label-style":"width:125px"}},[t._v(t._s(t.formatParam(t.caseInfo.phone)))]),r("el-descriptions-item",{attrs:{label:"分组","label-style":"width:125px"}},[t._v(t._s(t.caseInfo.affectedSide+t.caseInfo.affectedLimb+t.caseInfo.caseType))]),r("el-descriptions-item",{attrs:{label:"创建日期","label-style":"width:125px"}},[t._v(t._s(t.caseInfo.createBy))]),r("el-descriptions-item",{attrs:{label:"诊断","label-style":"width:125px"}},[r("div",{staticClass:"text-wrapper"},[t._v(t._s(t.caseInfo.caseInfo))])])],1),r("el-row",[r("el-col",{attrs:{span:5}},[t.caseInfo.preoperativeAppearance?r("el-descriptions",{staticStyle:{margin:"5px 5px 5px 25px"},attrs:{title:"术前外观照"}}):t._e(),t.caseInfo.preoperativeAppearance?r("el-row",[r("el-image",{staticStyle:{width:"135px",height:"112px",border:"1px dashed #d9d9d9","border-radius":"6px","margin-left":"30px"},attrs:{fit:"cover",src:t.caseInfo.preoperativeAppearance,"preview-src-list":[t.caseInfo.preoperativeAppearance]}},[r("div",{staticStyle:{"font-size":"30px",color:"#909399",background:"#f5f7fa","justify-content":"center",display:"flex","align-items":"center",height:"100%"},attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])],1):t._e()],1),r("el-col",{attrs:{span:5}},[t.caseInfo.preoperativeXray?r("el-descriptions",{staticStyle:{margin:"5px 5px 5px 5px"},attrs:{title:"术前影像"}}):t._e(),t.caseInfo.preoperativeXray?r("el-row",[r("el-image",{staticStyle:{width:"135px",height:"112px",border:"1px dashed #d9d9d9","border-radius":"6px","margin-left":"30px"},attrs:{fit:"cover",src:t.caseInfo.preoperativeXray,"preview-src-list":[t.caseInfo.preoperativeXray]}},[r("div",{staticStyle:{"font-size":"30px",color:"#909399",background:"#f5f7fa","justify-content":"center",display:"flex","align-items":"center",height:"100%"},attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])],1):t._e()],1)],1),r("el-row",{staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:4}},[r("div",{staticStyle:{color:"#303133","font-size":"22px","margin-left":"15px","margin-bottom":"15px","margin-top":"10px"}},[t._v(" 就诊记录 ")])]),r("el-col",{attrs:{span:4,offset:15}},[r("el-button",{attrs:{type:"success",round:""},on:{click:function(){e.newRecordDialog=!0,!0===e.furtherConsultationDialog&&(e.furtherConsultationDialog=!1,e.updateRecordDialog=!1,e.newRecord=t.newRecordTemplate),e.newRecord.createBy=e.dateFormat(new Date)}}},[t._v(" 新就诊 ")])],1)],1),r("el-timeline",t._l(t.recordList,(function(e){return r("el-timeline-item",{key:e.id,attrs:{timestamp:e.createBy,color:"TRUE"===e.origin?"#67C23A":"#409EFF",placement:"top"}},[r("el-card",[r("el-row",{staticStyle:{margin:"6px"}},[r("el-col",[r("span",{staticStyle:{color:"#303133","font-size":"15px"}},[r("el-tag",{attrs:{type:"TRUE"===e.origin?"success":""}},[t._v(" "+t._s("TRUE"===e.origin?"初诊":"复诊")+" ")]),r("span",{staticStyle:{"margin-left":"16px"}},[t._v(" 患侧: "+t._s("左侧"===e.affectedSide?"左侧":"右侧")+" ")]),r("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"info",size:"small",plain:"",round:""},on:{click:function(l){return t.recordDetail(e)}}},[t._v(" 详 情 ")]),t.userInfo.name===t.caseInfo.doctorName?r("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",size:"small",plain:"",round:""},on:{click:function(l){return t.furtherConsultation(e)}}},[t._v(" 新建复诊 ")]):t._e(),t.userInfo.name===t.caseInfo.doctorName&&(new Date).getTime()-new Date(e.createBy).getTime()<=864e5?r("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",size:"small",plain:"",round:""},on:{click:function(l){return t.updateRecord(e)}}},[t._v(" 修改 ")]):t._e(),t._e()],1)])],1),e.mark.length>0?r("el-row",{staticStyle:{margin:"6px",width:"90%"}},[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{staticStyle:{"margin-bottom":"3px"},attrs:{label:"备注: "}},[r("div",{staticClass:"text-wrapper"},[t._v(" "+t._s(e.mark)+" ")])])],1)],1):r("el-row",{staticStyle:{margin:"6px"}},[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{staticStyle:{"margin-bottom":"3px"},attrs:{label:"备注: "}},[t._v(" 无 ")])],1)],1)],1)],1)})),1),r("el-dialog",{attrs:{title:!1===t.furtherConsultationDialog?"新就诊记录":"复诊",visible:t.newRecordDialog,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(e){t.newRecordDialog=e}}},[!1===t.furtherConsultationDialog?r("span",{staticStyle:{"margin-left":"13px","font-size":"14px",color:"#F56C6C"}},[t._v(" * 此功能为为新患侧新建就诊记录(初诊), 历史患侧复诊请从上次就诊记录处新建 ")]):t._e(),!0===t.furtherConsultationDialog?r("span",{staticStyle:{"margin-left":"13px","font-size":"14px",color:"#F56C6C"}},[t._v(" * 您正在新建复诊, 已为您复制上一次诊断的记录, 请适当修改后提交 ")]):t._e(),r("el-form",{ref:"newRecord",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:t.newRecord,rules:t.rules}},[r("div",{staticStyle:{color:"#303133","font-size":"18px","margin-left":"20px","margin-bottom":"15px"}},[t._v(" 畸形参数 ")]),r("el-row",[r("el-form-item",{attrs:{label:"患侧","label-width":"90px",prop:"affectedSide"}},[r("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.affectedSide,callback:function(e){t.$set(t.newRecord,"affectedSide",e)},expression:"newRecord.affectedSide"}},t._l(t.affectedSideSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"参照断裂处","label-width":"150px",prop:"czdlc"}},[r("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.czdlc,callback:function(e){t.$set(t.newRecord,"czdlc",e)},expression:"newRecord.czdlc"}},t._l(t.czdlcSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"正位位移(mm)","label-width":"150px",prop:"zwwyfx"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.zwwyfx,callback:function(e){t.$set(t.newRecord,"zwwyfx",e)},expression:"newRecord.zwwyfx"}},t._l(t.zwwyfxSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"","label-width":"0",prop:"zwwy"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.zwwy,callback:function(e){t.$set(t.newRecord,"zwwy",e)},expression:"newRecord.zwwy"}})],1),r("el-form-item",{attrs:{label:"正位角度","label-width":"120px",prop:"zwjdfx"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.zwjdfx,callback:function(e){t.$set(t.newRecord,"zwjdfx",e)},expression:"newRecord.zwjdfx"}},t._l(t.zwjdfxSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"","label-width":"0",prop:"zwjd"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.zwjd,callback:function(e){t.$set(t.newRecord,"zwjd",e)},expression:"newRecord.zwjd"}})],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"侧位位移(mm)","label-width":"150px",prop:"cwwyfx"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.cwwyfx,callback:function(e){t.$set(t.newRecord,"cwwyfx",e)},expression:"newRecord.cwwyfx"}},t._l(t.cwwyfxSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"","label-width":"0",prop:"cwwy"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.cwwy,callback:function(e){t.$set(t.newRecord,"cwwy",e)},expression:"newRecord.cwwy"}})],1),r("el-form-item",{attrs:{label:"侧位角度","label-width":"120px",prop:"cwjdfx"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.cwjdfx,callback:function(e){t.$set(t.newRecord,"cwjdfx",e)},expression:"newRecord.cwjdfx"}},t._l(t.cwjdfxSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"","label-width":"0",prop:"cwjd"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.cwjd,callback:function(e){t.$set(t.newRecord,"cwjd",e)},expression:"newRecord.cwjd"}})],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"轴向位移(mm)","label-width":"150px",prop:"zxwyfx"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.zxwyfx,callback:function(e){t.$set(t.newRecord,"zxwyfx",e)},expression:"newRecord.zxwyfx"}},t._l(t.zxwyfxSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"","label-width":"0",prop:"zxwy"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.zxwy,callback:function(e){t.$set(t.newRecord,"zxwy",e)},expression:"newRecord.zxwy"}})],1),r("el-form-item",{attrs:{label:"轴向角度","label-width":"120px",prop:"zxjdfx"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.zxjdfx,callback:function(e){t.$set(t.newRecord,"zxjdfx",e)},expression:"newRecord.zxjdfx"}},t._l(t.zxjdfxSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"","label-width":"0",prop:"zxjd"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.zxjd,callback:function(e){t.$set(t.newRecord,"zxjd",e)},expression:"newRecord.zxjd"}})],1)],1),r("div",{staticStyle:{color:"#303133","font-size":"18px","margin-left":"20px","margin-bottom":"15px"}},[t._v(" 框架参数 ")]),r("el-row",[r("el-form-item",{attrs:{label:"近侧环直径","label-width":"130px",prop:"nearSideDiameter"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.nearSideDiameter,callback:function(e){t.$set(t.newRecord,"nearSideDiameter",e)},expression:"newRecord.nearSideDiameter"}},t._l(t.nearSideDiameterSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"远侧环直径","label-width":"130px",prop:"farSideDiameter"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.farSideDiameter,callback:function(e){t.$set(t.newRecord,"farSideDiameter",e)},expression:"newRecord.farSideDiameter"}},t._l(t.farSideDiameterSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"参考环中心正位偏移(mm)","label-width":"220px",prop:"zwwyfxRef"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.zwwyfxRef,callback:function(e){t.$set(t.newRecord,"zwwyfxRef",e)},expression:"newRecord.zwwyfxRef"}},t._l(t.zwwyfxRefSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"","label-width":"0",prop:"zwwyRef"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.zwwyRef,callback:function(e){t.$set(t.newRecord,"zwwyRef",e)},expression:"newRecord.zwwyRef"}})],1),r("el-form-item",{attrs:{label:"参考环中心侧位偏移(mm)","label-width":"190px",prop:"cwwyfxRef"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.cwwyfxRef,callback:function(e){t.$set(t.newRecord,"cwwyfxRef",e)},expression:"newRecord.cwwyfxRef"}},t._l(t.cwwyfxRefSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"","label-width":"0",prop:"cwwyRef"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.cwwyRef,callback:function(e){t.$set(t.newRecord,"cwwyRef",e)},expression:"newRecord.cwwyRef"}})],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"参考环中心轴向偏移(mm)","label-width":"220px",prop:"zxwyRef"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.zxwyRef,callback:function(e){t.$set(t.newRecord,"zxwyRef",e)},expression:"newRecord.zxwyRef"}})],1),r("el-form-item",{attrs:{label:"参考环旋转角度","label-width":"220px",prop:"senseRotationRef"}},[r("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",value:""},model:{value:t.newRecord.senseRotationRef,callback:function(e){t.$set(t.newRecord,"senseRotationRef",e)},expression:"newRecord.senseRotationRef"}},t._l(t.senseRotationRefSelect,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"","label-width":"0",prop:"rotationAngleRef"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.rotationAngleRef,callback:function(e){t.$set(t.newRecord,"rotationAngleRef",e)},expression:"newRecord.rotationAngleRef"}})],1)],1),r("div",{staticStyle:{color:"#303133","font-size":"18px","margin-left":"20px","margin-bottom":"15px"}},[t._v(" 杆长参数 "),!0===t.furtherConsultationDialog?r("span",{staticStyle:{"margin-left":"13px","font-size":"14px",color:"#F56C6C"}},[t._v(" * 复诊杆长参数取自距上次就诊天数的杆长，如有变化，请修改 ")]):t._e()]),r("el-row",[r("el-form-item",{attrs:{label:"初始杆长1(红)","label-width":"130px",prop:"poleOne"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.poleOne,callback:function(e){t.$set(t.newRecord,"poleOne",e)},expression:"newRecord.poleOne"}})],1),r("el-form-item",{attrs:{label:"初始杆长2(橙)","label-width":"110px",prop:"poleTwo"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.poleTwo,callback:function(e){t.$set(t.newRecord,"poleTwo",e)},expression:"newRecord.poleTwo"}})],1),r("el-form-item",{attrs:{label:"初始杆长3(黄)","label-width":"110px",prop:"poleThree"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.poleThree,callback:function(e){t.$set(t.newRecord,"poleThree",e)},expression:"newRecord.poleThree"}})],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"初始杆长4(绿)","label-width":"130px",prop:"poleFour"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.poleFour,callback:function(e){t.$set(t.newRecord,"poleFour",e)},expression:"newRecord.poleFour"}})],1),r("el-form-item",{attrs:{label:"初始杆长5(蓝)","label-width":"110px",prop:"poleFive"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.poleFive,callback:function(e){t.$set(t.newRecord,"poleFive",e)},expression:"newRecord.poleFive"}})],1),r("el-form-item",{attrs:{label:"初始杆长6(紫)","label-width":"110px",prop:"poleSix"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.poleSix,callback:function(e){t.$set(t.newRecord,"poleSix",e)},expression:"newRecord.poleSix"}})],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"疗程","label-width":"120px",prop:"treatment"}},[r("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入"},model:{value:t.newRecord.treatment,callback:function(e){t.$set(t.newRecord,"treatment",e)},expression:"newRecord.treatment"}})],1),r("el-form-item",{attrs:{label:"疗程开始时间","label-width":"120px",prop:"createBy"}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.newRecord.createBy,callback:function(e){t.$set(t.newRecord,"createBy",e)},expression:"newRecord.createBy"}})],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"备注","label-width":"60px",prop:"mark"}},[r("el-input",{staticStyle:{width:"800px"},attrs:{type:"textarea",maxlength:"1000",autosize:{minRows:2,maxRows:15},placeholder:"备注(非必填)","show-word-limit":""},model:{value:t.newRecord.mark,callback:function(e){t.$set(t.newRecord,"mark",e)},expression:"newRecord.mark"}})],1)],1),r("div",{staticStyle:{color:"#303133","font-size":"18px","margin-left":"20px","margin-bottom":"15px"}},[t._v(" 图像 ")]),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-image",{staticStyle:{width:"360px",height:"300px",border:"1px dashed #d9d9d9","border-radius":"6px","margin-left":"30px"},attrs:{fit:"cover",src:t.newRecord.xrayFront,"preview-src-list":[t.newRecord.xrayFront]}},[r("div",{staticStyle:{"font-size":"30px",color:"#909399",background:"#f5f7fa","justify-content":"center",display:"flex","align-items":"center",height:"100%"},attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])]),r("el-button",{staticStyle:{"margin-left":"27%"},attrs:{type:"success",plain:""}},[r("el-upload",{staticClass:"upload-demo",staticStyle:{"justify-content":"center",display:"flex","align-items":"center"},attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":t.xrayFrontUpload}},[t._v(" 上传正位图像 ")])],1)],1),r("el-col",{attrs:{span:10}},[r("el-image",{staticStyle:{width:"360px",height:"300px",border:"1px dashed #d9d9d9","border-radius":"6px"},attrs:{fit:"cover",src:t.newRecord.xrayLeft,"preview-src-list":[t.newRecord.xrayLeft]}},[r("div",{staticStyle:{"font-size":"30px",color:"#909399",background:"#f5f7fa","justify-content":"center",display:"flex","align-items":"center",height:"100%"},attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])]),r("el-button",{staticStyle:{"margin-left":"27%"},attrs:{type:"success",plain:""}},[r("el-upload",{staticClass:"upload-demo",staticStyle:{"justify-content":"center",display:"flex","align-items":"center"},attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":t.xrayLeftUpload}},[t._v(" 上传侧位图像 ")])],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.newRecordDialog=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addNewRecord}},[t._v("确 定")])],1)],1)],1)},a=[],o=(l("b0c0"),l("d3b7"),l("4d63"),l("ac1f"),l("25f0"),l("4d90"),l("5319"),l("5530")),n=l("d4f4"),i=l("4360"),c={name:"medicalRecord",data:function(){return{userInfo:{},caseInfo:{},newRecordDialog:!1,furtherConsultationDialog:!1,updateRecordDialog:!1,newRecord:{affectedSide:null,caseId:null,createBy:null,cwjd:null,cwjdfx:null,cwwy:null,cwwyRef:null,cwwyfx:null,cwwyfxRef:null,czdlc:null,farSideDiameter:null,frameFactory:null,frameModle:null,id:null,mark:null,modifiedBy:null,nearSideDiameter:null,origin:null,poleFive:null,poleFour:null,poleOne:null,poleSix:null,poleThree:null,poleTwo:null,rotationAngleRef:null,senseRotationRef:null,treatment:null,xrayFront:null,xrayLater:null,xrayLeft:null,xrayRight:null,zwjd:null,zwjdfx:null,zwwy:null,zwwyRef:null,zwwyfx:null,zwwyfxRef:null,zxjd:null,zxjdfx:null,zxwy:null,zxwyRef:null,zxwyfx:null,zxwyfxRef:null},newRecordTemplate:{affectedSide:null,caseId:null,createBy:null,cwjd:0,cwjdfx:"屈曲",cwwy:0,cwwyRef:0,cwwyfx:"前部",cwwyfxRef:"前部",czdlc:null,farSideDiameter:105,frameFactory:null,frameModle:null,id:null,mark:null,modifiedBy:null,nearSideDiameter:105,origin:null,poleFive:null,poleFour:null,poleOne:null,poleSix:null,poleThree:null,poleTwo:null,rotationAngleRef:0,senseRotationRef:"外旋",treatment:null,xrayFront:null,xrayLater:null,xrayLeft:null,xrayRight:null,zwjd:0,zwjdfx:"外翻",zwwy:0,zwwyRef:0,zwwyfx:"外侧",zwwyfxRef:"外侧",zxjd:0,zxjdfx:"外旋",zxwy:0,zxwyRef:0,zxwyfx:"短缩",zxwyfxRef:null},recordList:{},affectedSideSelect:[{value:"左侧",name:"左侧"},{value:"右侧",name:"右侧"}],czdlcSelect:[{value:"近侧",name:"近侧"},{value:"远侧",name:"远侧"}],zwwyfxSelect:[{value:"外侧",name:"外侧"},{value:"内侧",name:"内侧"}],zwjdfxSelect:[{value:"外翻",name:"外翻"},{value:"内翻",name:"内翻"}],cwwyfxSelect:[{value:"前部",name:"前部"},{value:"后部",name:"后部"}],cwjdfxSelect:[{value:"屈曲",name:"屈曲"},{value:"反张",name:"反张"}],zxwyfxSelect:[{value:"短缩",name:"短缩"},{value:"过长",name:"过长"}],zxjdfxSelect:[{value:"外旋",name:"外旋"},{value:"内旋",name:"内旋"}],nearSideDiameterSelect:[{value:105,name:"105"},{value:130,name:"130"},{value:155,name:"155"},{value:178,name:"178"},{value:205,name:"205"},{value:230,name:"230"}],farSideDiameterSelect:[{value:105,name:"105"},{value:130,name:"130"},{value:155,name:"155"},{value:178,name:"178"},{value:205,name:"205"},{value:230,name:"230"}],zwwyfxRefSelect:[{value:"外侧",name:"外侧"},{value:"内侧",name:"内侧"}],cwwyfxRefSelect:[{value:"前部",name:"前部"},{value:"后部",name:"后部"}],senseRotationRefSelect:[{value:"外旋",name:"外旋"},{value:"内旋",name:"内旋"}],rules:{affectedSide:[{required:!0,message:"请选择本次就诊患侧",trigger:"blur"}],czdlc:[{required:!0,message:"请选择参照断裂处",trigger:"blur"}],zwwyfx:[{required:!0,message:"请选择正位位移方向",trigger:"blur"}],zwwy:[{required:!0,message:"请输入正位位移",trigger:"blur"}],zwjdfx:[{required:!0,message:"请选择正位角度方向",trigger:"blur"}],zwjd:[{required:!0,message:"请输入正位角度",trigger:"blur"}],cwwyfx:[{required:!0,message:"请选择侧位位移方向",trigger:"blur"}],cwwy:[{required:!0,message:"请输入侧位位移",trigger:"blur"}],cwjdfx:[{required:!0,message:"请选择侧位角度方向",trigger:"blur"}],cwjd:[{required:!0,message:"请输入侧位角度",trigger:"blur"}],zxwyfx:[{required:!0,message:"请选择轴向位移方向",trigger:"blur"}],zxwy:[{required:!0,message:"请输入轴向位移",trigger:"blur"}],zxjdfx:[{required:!0,message:"请选择轴向角度方向",trigger:"blur"}],zxjd:[{required:!0,message:"请输入轴向角度",trigger:"blur"}],nearSideDiameter:[{required:!0,message:"请选择近侧环直径",trigger:"blur"}],farSideDiameter:[{required:!0,message:"请选择远侧环直径",trigger:"blur"}],zwwyfxRef:[{required:!0,message:"请选择参考环正位位移方向",trigger:"blur"}],zwwyRef:[{required:!0,message:"请输入参考环正位位移",trigger:"blur"}],cwwyfxRef:[{required:!0,message:"请选择参考环侧位位移方向",trigger:"blur"}],cwwyRef:[{required:!0,message:"请输入参考环侧位位移",trigger:"blur"}],zxwyRef:[{required:!0,message:"请输入参考环轴向位移",trigger:"blur"}],senseRotationRef:[{required:!0,message:"请选择参考环旋转方向",trigger:"blur"}],rotationAngleRef:[{required:!0,message:"请输入参考环旋转角度",trigger:"blur"}],poleOne:[{required:!0,message:"请输入初始杆长1",trigger:"blur"}],poleTwo:[{required:!0,message:"请输入初始杆长2",trigger:"blur"}],poleThree:[{required:!0,message:"请输入初始杆长3",trigger:"blur"}],poleFour:[{required:!0,message:"请输入初始杆长4",trigger:"blur"}],poleFive:[{required:!0,message:"请输入初始杆长5",trigger:"blur"}],poleSix:[{required:!0,message:"请输入初始杆长6",trigger:"blur"}],treatment:[{required:!0,message:"请输入疗程",trigger:"blur"}],createBy:[{required:!0,message:"请选择疗程开始时间",trigger:"blur"}]}}},mounted:function(){this.caseInfo=this.$route.params.case,null==this.caseInfo?this.caseInfo=JSON.parse(localStorage.getItem("medicalRecord")):localStorage.setItem("medicalRecord",JSON.stringify(this.caseInfo)),this.newRecord=this.newRecordTemplate,this.getUserInfo(),this.getRecordList()},methods:{getRecordList:function(){var e=this;Object(n["b"])({caseId:this.caseInfo.id}).then((function(t){e.recordList=t}))},addNewRecord:function(){var e=this;this.$refs["newRecord"].validate((function(t){if(!t)return e.$notify({title:"就诊记录",message:"输入参数不完整，请检查输入参数！",type:"warning",duration:2e3}),!1;e.newRecord.result=null;var l=e.$loading({lock:!0,text:"计算中，请稍候...",background:"rgba(0,0,0,0.5)"});e.updateRecordDialog?Object(n["m"])(Object(o["a"])(Object(o["a"])({},e.newRecord),{},{caseId:e.caseInfo.id})).then((function(t){e.$notify({title:"就诊记录",message:"修改就诊记录成功！",type:"success",duration:2e3}),e.newRecordDialog=!1,e.furtherConsultationDialog=!1,e.updateRecordDialog=!1,e.newRecord={},e.getRecordList(),e.$router.push({name:"recordDetail",params:{recordId:t}}),l.close()})).catch((function(t){e.newRecordDialog=!1,e.furtherConsultationDialog=!1,e.updateRecordDialog=!1,e.newRecord={},e.getRecordList(),l.close()})):Object(n["e"])(Object(o["a"])(Object(o["a"])({},e.newRecord),{},{caseId:e.caseInfo.id,origin:!1===e.furtherConsultationDialog?"TRUE":"FALSE"})).then((function(t){e.$notify({title:"就诊记录",message:"新建就诊记录成功！",type:"success",duration:2e3}),e.newRecordDialog=!1,e.furtherConsultationDialog=!1,e.newRecord={},e.getRecordList(),e.$router.push({name:"recordDetail",params:{recordId:t}}),l.close()})).catch((function(t){e.newRecordDialog=!1,e.furtherConsultationDialog=!1,e.newRecord={},e.getRecordList(),l.close()}))}))},furtherConsultation:function(e){var t=this;Object(n["a"])({childCaseId:e.id}).then((function(e){t.newRecordDialog=!0,t.newRecord=e;var l=parseInt(((new Date).getTime()-new Date(e.createBy).getTime())/864e5);l=Math.min(l,e.treatment),l=Math.max(l,0),t.newRecord.poleOne=e.result[l][1],t.newRecord.poleTwo=e.result[l][2],t.newRecord.poleThree=e.result[l][3],t.newRecord.poleFour=e.result[l][4],t.newRecord.poleFive=e.result[l][5],t.newRecord.poleSix=e.result[l][6],t.newRecord.createBy=t.dateFormat(new Date),t.furtherConsultationDialog=!0}))},updateRecord:function(e){var t=this;Object(n["a"])({childCaseId:e.id}).then((function(e){t.newRecordDialog=!0,t.newRecord=e,t.newRecord.createBy=t.dateFormat(new Date),t.updateRecordDialog=!0}))},recordDetail:function(e){this.$router.push({name:"recordDetail",params:{recordId:e.id}})},deleteChildCaseRecord:function(e){var t=this;this.$confirm("此操作将删除该就诊记录, 不可恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["c"])({childCaseId:e.id}).then((function(e){t.$notify({title:"就诊记录",message:"您已成功删除该就诊记录！",type:"success",duration:2e3}),t.getRecordList()}))}))},xrayFrontUpload:function(e){this.changeUpload(e,"xrayFront")},xrayLeftUpload:function(e){this.changeUpload(e,"xrayLeft")},changeUpload:function(e,t){var l=this,r=e.size/1024/1024<20;if(!r)return this.$message.error("上传图像大小不能超过 20MB!"),!1;var a=new FormData;a.append("file",e.raw),a.append("caseId",this.caseInfo.id);var o=this.$loading({lock:!0,text:"上传图像中，请稍候...",background:"rgba(0,0,0,0.5)"});Object(n["n"])(a).then((function(e){l.$notify({title:"上传图像成功",type:"success",duration:3e3}),l.newRecord[t]=e,o.close()})).catch((function(){o.close()}))},dateFormat:function(e){var t,l="yyyy-MM-dd HH:mm:ss",r={"y+":e.getFullYear().toString(),"M+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"m+":e.getMinutes().toString(),"s+":e.getSeconds().toString()};for(var a in r)t=new RegExp("("+a+")").exec(l),t&&(l=l.replace(t[1],1===t[1].length?r[a]:r[a].padStart(t[1].length,"0")));return console.log(l),l},getUserInfo:function(){i["a"].dispatch("user/getInfo");var e={};e.id=i["a"].getters.id,e.name=i["a"].getters.name,e.hospital=i["a"].getters.hospital,e.phone=i["a"].getters.phone,e.email=i["a"].getters.email,e.role=i["a"].getters.role,this.userInfo=e},formatParam:function(e){return null===e||""===e?"空":e}}},s=c,d=(l("ebe5"),l("2877")),u=Object(d["a"])(s,r,a,!1,null,"1ad65f56",null);t["default"]=u.exports},"4d90":function(e,t,l){"use strict";var r=l("23e7"),a=l("0ccb").start,o=l("9a0c");r({target:"String",proto:!0,forced:o},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"7e3d":function(e,t,l){},"9a0c":function(e,t,l){var r=l("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},d4f4:function(e,t,l){"use strict";l.d(t,"d",(function(){return a})),l.d(t,"l",(function(){return o})),l.d(t,"f",(function(){return n})),l.d(t,"e",(function(){return i})),l.d(t,"m",(function(){return c})),l.d(t,"b",(function(){return s})),l.d(t,"g",(function(){return d})),l.d(t,"h",(function(){return u})),l.d(t,"a",(function(){return p})),l.d(t,"j",(function(){return f})),l.d(t,"i",(function(){return w})),l.d(t,"k",(function(){return m})),l.d(t,"c",(function(){return x})),l.d(t,"n",(function(){return y}));var r=l("b775");function a(e){return Object(r["a"])({url:"/case/newCase",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/case/updateCase",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/case/queryCase",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/case/newChildCaseRecord",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/case/updateChildCaseRecord",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/case/childCaseRecordList",method:"get",params:e})}function d(e){return Object(r["a"])({url:"/case/queryCaseById",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/case/queryCaseByPatient",method:"get",params:e})}function p(e){return Object(r["a"])({url:"/case/childCaseInfo",method:"get",params:e})}function f(e){return Object(r["a"])({url:"/case/recordInitialPose",method:"get",params:e})}function w(e){return Object(r["a"])({url:"/case/recordFinalPose",method:"get",params:e})}function m(e){return Object(r["a"])({url:"/case/recordPose",method:"get",params:e})}function x(e){return Object(r["a"])({url:"/case/deleteChildCaseRecord",method:"delete",data:e})}function y(e){return Object(r["a"])({url:"/case/uploadXRay",headers:{"Content-Type":"multipart/form-data"},method:"post",data:e})}},ebe5:function(e,t,l){"use strict";var r=l("7e3d"),a=l.n(r);a.a}}]);