(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54253651"],{e382:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"user-container shadow"},[s("el-form",{ref:"userInfo",staticStyle:{width:"500px"},attrs:{model:e.userInfo,rules:e.rules}},[s("el-form-item",{attrs:{label:"姓名","label-width":"95px",prop:"name"}},[s("el-input",{attrs:{placeholder:"真实姓名"},model:{value:e.userInfo.name,callback:function(r){e.$set(e.userInfo,"name",r)},expression:"userInfo.name"}})],1),s("el-form-item",{attrs:{label:"所属医院","label-width":"95px",prop:"hospital"}},[s("el-input",{attrs:{placeholder:"所属医院"},model:{value:e.userInfo.hospital,callback:function(r){e.$set(e.userInfo,"hospital",r)},expression:"userInfo.hospital"}})],1),s("el-form-item",{attrs:{label:"所属科室","label-width":"95px",prop:"department"}},[s("el-input",{attrs:{placeholder:"所属科室"},model:{value:e.userInfo.department,callback:function(r){e.$set(e.userInfo,"department",r)},expression:"userInfo.department"}})],1),s("el-form-item",{attrs:{label:"手机号","label-width":"95px",prop:"phone"}},[s("el-input",{attrs:{type:"number",placeholder:"联系方式 手机号"},model:{value:e.userInfo.phone,callback:function(r){e.$set(e.userInfo,"phone",r)},expression:"userInfo.phone"}})],1),s("el-form-item",{attrs:{label:"邮箱","label-width":"95px",prop:"email"}},[s("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.userInfo.email,callback:function(r){e.$set(e.userInfo,"email",r)},expression:"userInfo.email"}})],1)],1),s("div",{staticStyle:{"margin-left":"95px"}},[s("el-button",{attrs:{type:"primary",round:""},on:{click:e.modificationUserInfo}},[e._v("修改个人信息")])],1),s("el-divider"),s("el-form",{ref:"newPassword",staticStyle:{width:"500px"},attrs:{model:e.newPassword,rules:e.passwordRules}},[s("el-form-item",{attrs:{label:"旧密码","label-width":"95px",prop:"oldPassword"}},[s("el-input",{attrs:{type:"password",placeholder:"旧密码"},model:{value:e.newPassword.oldPassword,callback:function(r){e.$set(e.newPassword,"oldPassword",r)},expression:"newPassword.oldPassword"}})],1),s("el-form-item",{attrs:{label:"新密码","label-width":"95px",prop:"newPassword"}},[s("el-input",{attrs:{type:"password",placeholder:"新密码"},model:{value:e.newPassword.newPassword,callback:function(r){e.$set(e.newPassword,"newPassword",r)},expression:"newPassword.newPassword"}})],1),s("el-form-item",{attrs:{label:"确认新密码","label-width":"95px",prop:"newPassword2"}},[s("el-input",{attrs:{type:"password",placeholder:"确认新密码"},model:{value:e.newPassword.newPassword2,callback:function(r){e.$set(e.newPassword,"newPassword2",r)},expression:"newPassword.newPassword2"}})],1)],1),s("div",{staticStyle:{"margin-left":"95px"}},[s("el-button",{attrs:{type:"primary",round:""},on:{click:e.modificationPassword}},[e._v("修改密码")])],1)],1)},a=[],n=(s("b0c0"),s("96cf"),s("1da1")),o=s("c24f"),l=s("4360"),i=s("5c96"),d={name:"User",data:function(){var e=function(e,r,s){r.length<6?s(new Error("密码不少于六个字符")):s()};return{userInfo:{},newPassword:{oldPassword:"",newPassword:"",newPassword2:"",department:""},passwordRules:{oldPassword:[{required:!0,trigger:"blur",validator:e}],newPassword:[{required:!0,trigger:"blur",validator:e}],newPassword2:[{required:!0,trigger:"blur",validator:e}]},rules:{name:[{required:!0,message:"请输入用户姓名(不少于两个字符)",trigger:"blur",min:2}],hospital:[{required:!0,message:"请输入所属医院",trigger:"blur",min:1}],phone:[{required:!0,message:"请输入手机号",trigger:"blur",min:5}],department:[{required:!0,message:"请输入所属科室",trigger:"blur",min:1}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}}},mounted:function(){this.getUserInfo()},methods:{modificationUserInfo:function(){var e=this;this.$refs["userInfo"].validate((function(r){if(!r)return!1;Object(o["f"])(e.userInfo).then(Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Object(i["Message"])({message:"修改个人信息成功",type:"success",duration:5e3}),r.next=3,l["a"].dispatch("user/reLogin");case 3:return r.next=5,e.getUserInfo();case 5:case"end":return r.stop()}}),r)}))))}))},modificationPassword:function(){var e=this;this.$refs["newPassword"].validate((function(r){if(!r)return!1;e.newPassword.newPassword===e.newPassword.newPassword2?Object(o["e"])({id:e.userInfo.id,oldPassword:e.newPassword.oldPassword,newPassword:e.newPassword.newPassword}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Object(i["Message"])({message:"修改密码成功",type:"success",duration:5e3}),r.next=3,l["a"].dispatch("user/reLogin");case 3:return r.next=5,e.getUserInfo();case 5:case"end":return r.stop()}}),r)})))):Object(i["Message"])({message:"两次输入的密码不一致",type:"warning",duration:5e3})}))},getUserInfo:function(){l["a"].dispatch("user/getInfo");var e={};e.id=l["a"].getters.id,e.name=l["a"].getters.name,e.hospital=l["a"].getters.hospital,e.phone=l["a"].getters.phone,e.email=l["a"].getters.email,e.department=l["a"].state.user.department,this.userInfo=e,console.log(l["a"])}}},u=d,p=(s("e3d2"),s("2877")),w=Object(p["a"])(u,t,a,!1,null,"4de34a6e",null);r["default"]=w.exports},e3d2:function(e,r,s){"use strict";var t=s("ff6b"),a=s.n(t);a.a},ff6b:function(e,r,s){}}]);